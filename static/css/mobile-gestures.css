/* mobile-gestures.css - スマートフォン向けジェスチャー対応とUI改善のためのスタイル
 * カブログ用に作成されたスタイルシート
 */

/* スピードダイヤルとの互換性確保 */
.speed-dial-container {
    z-index: 1040 !important;
  }
  
  /* ========== スワイプ関連のスタイル ========== */
  
  /* スワイプ可能な要素 */
  .swipeable {
    touch-action: pan-y;
    user-select: none;
    position: relative;
    transition: transform 0.3s ease;
  }
  
  /* 日記カードのスワイプ効果 */
  .diary-card {
    overflow: hidden;
    position: relative;
  }
  
  /* 右スワイプ（編集）の背景効果 */
  .swipe-right-active::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(var(--warning-color-rgb, 245, 158, 11), 0.1);
    z-index: -1;
  }
  
  /* 右スワイプ（編集）のアイコン表示 */
  .swipe-right-active::after {
    content: "\F4DD"; /* Bootstrap Icons: pencil */
    font-family: "bootstrap-icons";
    position: absolute;
    left: 15px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 1.5rem;
    color: var(--warning-color, #f59e0b);
    opacity: 0.7;
  }
  
  /* 左スワイプ（削除）の背景効果 */
  .swipe-left-active::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(var(--danger-color-rgb, 239, 68, 68), 0.1);
    z-index: -1;
  }
  
  /* 左スワイプ（削除）のアイコン表示 */
  .swipe-left-active::after {
    content: "\F5DE"; /* Bootstrap Icons: trash */
    font-family: "bootstrap-icons";
    position: absolute;
    right: 15px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 1.5rem;
    color: var(--danger-color, #ef4444);
    opacity: 0.7;
  }
  
  /* 長押し効果 */
  .long-press-active {
    animation: pulse 0.3s ease-in-out;
  }
  
  @keyframes pulse {
    0% {
      transform: scale(1);
    }
    50% {
      transform: scale(0.98);
    }
    100% {
      transform: scale(1);
    }
  }
  
  /* タップ効果 */
  .tap-active {
    animation: tap 0.15s ease-in-out;
  }
  
  @keyframes tap {
    0% {
      transform: scale(1);
    }
    50% {
      transform: scale(0.97);
    }
    100% {
      transform: scale(1);
    }
  }
  
  /* ========== アクションドロワー ========== */
  
  .action-drawer {
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 1050;
    background-color: rgba(0, 0, 0, 0.5);
    height: 100%;
    transform: translateY(100%);
    transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    opacity: 0;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
  }
  
  .action-drawer-active {
    transform: translateY(0);
    opacity: 1;
  }
  
  .action-drawer-content {
    background-color: white;
    border-top-left-radius: 16px;
    border-top-right-radius: 16px;
    padding: 0;
    box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
    max-height: 80vh;
    overflow-y: auto;
    position: relative;
  }
  
  .action-drawer-header {
    padding: 16px;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  
  .action-drawer-header h5 {
    margin: 0;
    font-size: 1.1rem;
    font-weight: 600;
  }
  
  .action-drawer-header .action-drawer-close {
    background: none;
    border: none;
    font-size: 1.5rem;
    line-height: 1;
    padding: 0;
    color: #666;
  }
  
  .action-drawer-body {
    padding: 16px;
  }
  
  /* アクションボタン */
  .action-btn {
    display: flex;
    align-items: center;
    padding: 14px 16px;
    background-color: #f8f9fa;
    border-radius: 8px;
    margin-bottom: 8px;
    text-decoration: none;
    color: var(--text-color);
    font-weight: 500;
    transition: all 0.2s;
  }
  
  .action-btn i {
    margin-right: 12px;
    font-size: 1.25rem;
  }
  
  .action-btn:hover, .action-btn:active {
    background-color: #f2f2f2;
    transform: translateY(-2px);
  }
  
  .action-btn-danger {
    color: var(--danger-color);
  }
  
  .action-btn-danger:hover, .action-btn-danger:active {
    background-color: rgba(var(--danger-color-rgb, 239, 68, 68), 0.1);
  }
  
  .action-btn-secondary {
    color: var(--text-light);
  }
  
  .action-buttons {
    display: flex;
    gap: 8px;
  }
  
  .action-buttons .action-btn {
    flex: 1;
    justify-content: center;
  }
  
  /* ドロワータイプ別のスタイル */
  .action-drawer-edit .action-drawer-header {
    border-color: rgba(var(--warning-color-rgb, 245, 158, 11), 0.2);
  }
  
  .action-drawer-edit .action-drawer-header h5 {
    color: var(--warning-color, #f59e0b);
  }
  
  .action-drawer-delete .action-drawer-header {
    border-color: rgba(var(--danger-color-rgb, 239, 68, 68), 0.2);
  }
  
  .action-drawer-delete .action-drawer-header h5 {
    color: var(--danger-color, #ef4444);
  }
  
  /* ========== プル・トゥ・リフレッシュ ========== */
  
  .pull-indicator {
    width: 100%;
    height: 0;
    overflow: hidden;
    transition: height 0.2s ease-out;
    background-color: rgba(74, 109, 167, 0.05);
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  
  .pull-indicator-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
  }
  
  .pull-spinner {
    width: 24px;
    height: 24px;
    border: 2px solid #ccc;
    border-bottom-color: var(--primary-color);
    border-radius: 50%;
    transition: transform 0.2s ease;
  }
  
  .pull-indicator.refreshing .pull-spinner {
    border-color: rgba(74, 109, 167, 0.3);
    border-bottom-color: var(--primary-color);
    animation: spin 1s linear infinite;
  }
  
  @keyframes spin {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }
  
  .pull-text {
    font-size: 12px;
    color: var(--text-light);
  }
  
  .pull-indicator.ready .pull-text {
    color: var(--primary-color);
    font-weight: 500;
  }
  
  /* ========== スクロールトップボタン ========== */
  
  .scroll-top-btn {
    position: fixed;
    bottom: 90px; /* スピードダイヤルの上 */
    right: 16px;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: var(--primary-color);
    color: white;
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.15);
    z-index: 1030;
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.3s, transform 0.3s;
    pointer-events: none;
  }
  
  .scroll-top-btn.visible {
    opacity: 0.9;
    transform: translateY(0);
    pointer-events: auto;
  }
  
  .scroll-top-btn:hover {
    opacity: 1;
    transform: translateY(-3px);
  }
  
  .scroll-top-btn i {
    font-size: 1.2rem;
  }
  
  /* ========== タッチ強化 ========== */
  
  .touch-enhanced {
    position: relative;
    overflow: hidden;
  }
  
  .touch-enhanced::after {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    width: 5px;
    height: 5px;
    background-color: rgba(255, 255, 255, 0.7);
    opacity: 0;
    border-radius: 100%;
    transform: scale(1) translate(-50%, -50%);
    transition: opacity 0.3s, transform 0.5s;
    pointer-events: none;
  }
  
  .touch-enhanced.touch-active::after {
    opacity: 1;
    transform: scale(100) translate(-50%, -50%);
    transition: transform 0.5s, opacity 0.2s;
  }
  
  /* ボタンタイプに応じた波紋カラー */
  .btn-primary.touch-active::after,
  .btn-info.touch-active::after {
    background-color: rgba(255, 255, 255, 0.3);
  }
  
  .btn-success.touch-active::after,
  .btn-danger.touch-active::after,
  .btn-warning.touch-active::after {
    background-color: rgba(255, 255, 255, 0.3);
  }
  
  .btn-outline-primary.touch-active::after,
  .btn-outline-secondary.touch-active::after {
    background-color: rgba(var(--primary-color-rgb, 74, 109, 167), 0.1);
  }
  
  /* ========== トースト通知 ========== */
  
  .mobile-toast {
    position: fixed;
    bottom: 80px; /* スピードダイヤルの上 */
    left: 50%;
    transform: translateX(-50%) translateY(100px);
    background-color: rgba(33, 37, 41, 0.9);
    color: white;
    border-radius: 8px;
    padding: 12px 16px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
    font-size: 14px;
    font-weight: 500;
    z-index: 1060;
    min-width: 200px;
    max-width: 90%;
    transition: transform 0.3s ease-out;
    opacity: 0;
  }
  
  .mobile-toast-visible {
    transform: translateX(-50%) translateY(0);
    opacity: 1;
  }
  
  .mobile-toast-content {
    display: flex;
    align-items: center;
    gap: 8px;
  }
  
  .mobile-toast-content i {
    font-size: 1.2rem;
  }
  
  /* トーストタイプ別のスタイル */
  .mobile-toast-success {
    background-color: rgba(var(--success-color-rgb, 16, 185, 129), 0.9);
  }
  
  .mobile-toast-warning {
    background-color: rgba(var(--warning-color-rgb, 245, 158, 11), 0.9);
  }
  
  .mobile-toast-danger {
    background-color: rgba(var(--danger-color-rgb, 239, 68, 68), 0.9);
  }
  
  .mobile-toast-info {
    background-color: rgba(var(--primary-color-rgb, 74, 109, 167), 0.9);
  }
  
  /* ========== オフライン対応 ========== */
  
  .is-offline .offline-sensitive {
    opacity: 0.7;
    pointer-events: none;
  }
  
  .offline-badge {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    background-color: var(--warning-color);
    color: white;
    text-align: center;
    padding: 4px 0;
    font-size: 12px;
    font-weight: 500;
    z-index: 1070;
    transform: translateY(-100%);
    transition: transform 0.3s ease-out;
  }
  
  .is-offline .offline-badge {
    transform: translateY(0);
  }
  
  /* ========== インラインバリデーション ========== */
  
  .validate-inline:focus {
    border-color: var(--primary-color);
  }
  
  .validate-inline.is-valid {
    border-color: var(--success-color) !important;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%2310b981' d='M2.3 6.73L.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right calc(0.375em + 0.1875rem) center;
    background-size: calc(0.75em + 0.375rem) calc(0.75em + 0.375rem);
  }
  
  .validate-inline.is-invalid {
    border-color: var(--danger-color) !important;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23ef4444'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23ef4444' stroke='none'/%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right calc(0.375em + 0.1875rem) center;
    background-size: calc(0.75em + 0.375rem) calc(0.75em + 0.375rem);
  }
  
  /* ========== コンテキストメニュー ========== */
  
  .context-menu {
    position: absolute;
    background-color: white;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    padding: 8px 0;
    z-index: 1050;
    min-width: 150px;
    transform-origin: top left;
    animation: scaleIn 0.2s ease-out;
  }
  
  @keyframes scaleIn {
    0% {
      opacity: 0;
      transform: scale(0.7);
    }
    100% {
      opacity: 1;
      transform: scale(1);
    }
  }
  
  .context-menu-item {
    padding: 8px 16px;
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
    transition: background-color 0.2s;
  }
  
  .context-menu-item:hover {
    background-color: rgba(74, 109, 167, 0.1);
  }
  
  .context-menu-item i {
    font-size: 1rem;
    color: var(--primary-color);
  }
  
  .context-menu-divider {
    height: 1px;
    background-color: rgba(0, 0, 0, 0.1);
    margin: 4px 0;
  }
  
  /* ========== フィードバック強化 ========== */
  
  .feedback-indicator {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: rgba(33, 37, 41, 0.9);
    color: white;
    border-radius: 12px;
    padding: 16px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
    z-index: 1070;
    min-width: 120px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s, visibility 0.3s;
  }
  
  .feedback-indicator.active {
    opacity: 1;
    visibility: visible;
  }
  
  .feedback-indicator i {
    font-size: 2rem;
  }
  
  .feedback-indicator-text {
    font-size: 14px;
    text-align: center;
  }
  
  /* ========== モバイル最適化ツールバー ========== */
  
  .mobile-toolbar {
    display: none;
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background-color: white;
    box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
    z-index: 1030;
    padding: 10px 16px;
  }
  
  @media (max-width: 768px) {
    .mobile-toolbar {
      display: flex;
    }
  }
  
  .mobile-toolbar-items {
    display: flex;
    justify-content: space-around;
    width: 100%;
  }
  
  .mobile-toolbar-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    color: var(--text-light);
    text-decoration: none;
    font-size: 0.8rem;
  }
  
  .mobile-toolbar-item i {
    font-size: 1.3rem;
    margin-bottom: 4px;
  }
  
  .mobile-toolbar-item.active {
    color: var(--primary-color);
  }
  
  /* ========== タップエリア拡大 ========== */
  
  @media (max-width: 768px) {
    /* タップ領域の最小サイズを確保 */
    .btn, 
    .nav-link, 
    button,
    .action-icon-btn,
    a.badge,
    .calendar-nav-button,
    .tab-link {
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    /* フォームコントロールの調整 */
    .form-control, 
    .form-select,
    input[type="text"],
    input[type="number"],
    input[type="date"] {
      min-height: 44px;
      padding-top: 10px;
      padding-bottom: 10px;
    }
    
    /* チェックボックスとラジオボタンの調整 */
    .form-check-label {
      min-height: 44px;
      display: flex;
      align-items: center;
      padding-left: 5px;
    }
    
    .form-check-input {
      width: 22px;
      height: 22px;
    }
  }
  
  /* ========== レスポンシブ調整 ========== */
  
  @media (max-width: 576px) {
    .action-btn {
      padding: 12px 14px;
    }
    
    .mobile-toast {
      min-width: 180px;
      font-size: 13px;
      padding: 10px 14px;
    }
    
    .scroll-top-btn {
      width: 36px;
      height: 36px;
      right: 14px;
      bottom: 84px;
    }
    
    .scroll-top-btn i {
      font-size: 1rem;
    }
  }
  
  /* ========== モーダルタブスワイプ ========== */
  
  /* タブコンテンツのスワイプ用スタイル */
  #quickDiaryTabContent {
    position: relative;
    touch-action: pan-y;
    user-select: none;
    overflow: hidden;
  }
  
  /* タブ切り替え時のアニメーション改善 */
  .tab-pane.fade {
    transition: opacity 0.25s ease-out;
  }
  
  /* スワイプ方向の指示表示（オプション） */
  #quickDiaryTabContent::before,
  #quickDiaryTabContent::after {
    content: "";
    position: absolute;
    width: 20px;
    height: 20px;
    border-top: 2px solid rgba(var(--primary-color-rgb), 0.3);
    border-right: 2px solid rgba(var(--primary-color-rgb), 0.3);
    top: 50%;
    opacity: 0;
    transition: opacity 0.3s ease;
    z-index: 5;
    pointer-events: none;
  }
  
  #quickDiaryTabContent::before {
    left: 15px;
    transform: translateY(-50%) rotate(-135deg);
  }
  
  #quickDiaryTabContent::after {
    right: 15px;
    transform: translateY(-50%) rotate(45deg);
  }
  
  /* スワイプ中のタブに視覚的フィードバック */
  .tab-highlight {
    animation: tab-glow 0.3s ease-out;
  }
  
  @keyframes tab-glow {
    0% {
      background-color: transparent;
    }
    50% {
      background-color: rgba(var(--primary-color-rgb), 0.1);
    }
    100% {
      background-color: transparent;
    }
  }
  
  /* モーダルタブのレスポンシブ対応 */
  @media (max-width: 576px) {
    #quickDiaryTabs .nav-link {
      padding: 10px 8px;
      font-size: 0.85rem;
    }
    
    /* スワイプ中のみ指示アイコンを表示 */
    #quickDiaryTabContent.swiping::before,
    #quickDiaryTabContent.swiping::after {
      opacity: 0.8;
    }
  }
  