{% extends 'base.html' %}

{% block title %}アカウント削除の確認 | カブログ{% endblock %}

{% block head %}
{{ block.super }}
<style>
  .delete-card {
    border: none;
    border-radius: 0.5rem;
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
    overflow: hidden;
    max-width: 600px;
    margin: 0 auto;
  }
  
  .delete-header {
    background-color: #ef4444;
    color: white;
    padding: 1.5rem;
    text-align: center;
  }
  
  .delete-body {
    padding: 2rem;
  }
  
  .warning-icon {
    font-size: 4rem;
    color: #ef4444;
    display: block;
    text-align: center;
    margin-bottom: 1.5rem;
  }
  
  .data-list {
    background-color: #f9fafb;
    border-radius: 0.5rem;
    padding: 1.5rem;
    margin: 1.5rem 0;
  }
  
  .data-item {
    display: flex;
    align-items: center;
    margin-bottom: 0.5rem;
  }
  
  .data-item i {
    margin-right: 0.5rem;
    color: #6b7280;
  }

  /* ダークモード */
  .dark-mode .delete-card,
  [data-theme="dark"] .delete-card {
    background-color: var(--dm-card, #1e1e2e);
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
  }

  .dark-mode .delete-body,
  [data-theme="dark"] .delete-body {
    background-color: var(--dm-card, #1e1e2e);
    color: var(--dm-foreground, #e0e0e8);
  }

  .dark-mode .delete-body h3,
  [data-theme="dark"] .delete-body h3 {
    color: var(--dm-foreground, #e0e0e8);
  }

  .dark-mode .delete-body p,
  [data-theme="dark"] .delete-body p {
    color: var(--dm-muted-foreground, #a0a0b8);
  }

  .dark-mode .alert-danger,
  [data-theme="dark"] .alert-danger {
    background-color: rgba(239, 68, 68, 0.1) !important;
    border-color: rgba(239, 68, 68, 0.3) !important;
    color: #fca5a5 !important;
  }

  .dark-mode .data-list,
  [data-theme="dark"] .data-list {
    background-color: var(--dm-bg-tertiary, #2a2a3e);
    border: 1px solid var(--dm-border, #3a3a4e);
  }

  .dark-mode .data-item,
  [data-theme="dark"] .data-item {
    color: var(--dm-foreground, #e0e0e8);
  }

  .dark-mode .data-item i,
  [data-theme="dark"] .data-item i {
    color: var(--dm-muted-foreground, #a0a0b8);
  }

  .dark-mode .btn-outline-secondary,
  [data-theme="dark"] .btn-outline-secondary {
    color: var(--dm-muted-foreground, #a0a0b8) !important;
    border-color: var(--dm-border, #3a3a4e) !important;
  }

  .dark-mode .btn-outline-secondary:hover,
  [data-theme="dark"] .btn-outline-secondary:hover {
    background-color: var(--dm-bg-tertiary, #2a2a3e) !important;
    color: var(--dm-foreground, #e0e0e8) !important;
  }
</style>
{% endblock %}

{% block content %}
<div class="container py-5">
  <div class="delete-card">
    <div class="delete-header">
      <h2>アカウント削除の確認</h2>
    </div>
    
    <div class="delete-body">
      <i class="bi bi-exclamation-triangle-fill warning-icon"></i>
      
      <h3 class="text-center mb-4">アカウントを削除しますか？</h3>
      
      <div class="alert alert-danger">
        <strong>警告:</strong> アカウントを削除すると、以下のデータがすべて削除され、復元できなくなります。
      </div>
      
      <div class="data-list">
        <div class="data-item">
          <i class="bi bi-journal-text"></i>
          <span>投資記録 ({{ user.stockdiary_set.count }}件)</span>
        </div>
        <div class="data-item">
          <i class="bi bi-check2-square"></i>
          <span>チェックリスト ({{ user.checklist_set.count }}件)</span>
        </div>
        <div class="data-item">
          <i class="bi bi-tags"></i>
          <span>タグ ({{ user.tag_set.count }}件)</span>
        </div>
        <div class="data-item">
          <i class="bi bi-person"></i>
          <span>アカウント情報</span>
        </div>
      </div>
      
      <p class="text-center mb-4">本当にアカウントを削除しますか？</p>
      
      <div class="d-flex justify-content-center gap-3">
        <a href="{% url 'users:profile' %}" class="btn btn-outline-secondary">
          <i class="bi bi-arrow-left me-1"></i> キャンセル
        </a>
        
        <form method="post" action="{% url 'users:account_delete' %}">
          {% csrf_token %}
          <button type="submit" class="btn btn-danger">
            <i class="bi bi-trash me-1"></i> アカウントを削除する
          </button>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}