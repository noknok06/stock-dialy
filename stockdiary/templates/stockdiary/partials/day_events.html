<!-- day_events.html - 特定の日付のイベント一覧を表示する部分テンプレート -->

{% if events %}
  {% for event in events %}
    <a href="{{ event.url }}" class="calendar-event-item">
      <span class="badge {% if event.event_type == 'purchase' %}bg-success
                      {% elif event.event_type == 'sell' %}bg-danger
                      {% else %}bg-info{% endif %}">
        {% if event.event_type == 'purchase' %}購入
        {% elif event.event_type == 'sell' %}売却
        {% else %}メモ{% endif %}
      </span>
      <div>
        <div class="fw-bold">{{ event.title }} ({{ event.symbol }})</div>
        {% if event.event_type == 'memo' %}
          <div class="small">記録のみ</div>
        {% elif event.event_type == 'purchase' and event.price %}
          <div class="small">{{ event.price|floatformat:0 }}円 × {{ event.quantity }}株</div>
        {% elif event.event_type == 'sell' and event.price %}
          <div class="small">{{ event.price|floatformat:0 }}円 × {{ event.quantity }}株</div>
        {% else %}
          <div class="small">価格情報なし</div>
        {% endif %}
      </div>
    </a>
  {% endfor %}
  
  {% if events_count > events|length %}
    <div class="text-center text-muted small mt-2">
      他 {{ events_count|add:"-5" }} 件のイベントがあります
    </div>
  {% endif %}
{% else %}
  <p class="text-muted">この日のイベントはありません</p>
{% endif %}